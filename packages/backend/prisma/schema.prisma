// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// prisma 그냥 client는 안씀
// generator client {
//   provider = "prisma-client-js"
// }

generator kysely {
  provider = "prisma-kysely"

  // Optionally provide a destination directory for the generated file
  // and a filename of your choice
  output    = "../src/tables"
  fileName  = "codegen.ts"
  camelCase = true
}

datasource db {
  // provider=sqlite이면 Json 필드를 쓸 수 없다.
  // 어차피 최종 결과물은 mysql이 될거니까 mysql 기준으로 작성
  provider = "mysql"

  // https://www.prisma.io/docs/guides/development-environment/environment-variables/managing-env-files-and-setting-variables
  // cp .env.development .env
  // dotenv-cli 같은거 쓰는것도 방법인데 db 주소는 자주 안바뀔거니까 무식하게 대응
  url = env("DATABASE_URL")
}

// TODO: 유저 인증을 공유할 방법이 있을까?
model User {
  id Int @id @default(autoincrement())

  username String @unique
  password String

  created_at DateTime @default(now())
  updated_at DateTime @default(dbgenerated("CURRENT_TIMESTAMP(3) ON UPDATE CURRENT_TIMESTAMP(3)")) @updatedAt

  @@map("hasuki_user")
}
